<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base::layout(~{::section})}">
<head>
<meta charset="UTF-8">
<title>Order Checkout</title>
</head>
<body>
	<section>
		<div class="container mt-5">
			<th:block th:if="${carts.isEmpty()}">
				<div class="alert alert-warning alert-dismissible fade show" role="alert">
					<strong>No Items in Cart!</strong> Please add items to cart before placing an order.
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
				<div class="text-center">
					<a href="/user/cart" class="btn btn-primary">Go to Cart</a>
				</div>
			</th:block>

			<th:block th:if="${!carts.isEmpty()}">
			<div class="row">
				<div class="col-md-6">
				<p class="fs-4 text-center">Delivery Address</p>
				<hr>
				<form th:action="@{/user/place-order}" method="post">
					<div class="mb-3">
						<label class="form-label">Address</label>
						<input type="text" name="address" placeholder="Street Address" class="form-control" required>
					</div>

					<div class="mb-3">
						<label class="form-label">City</label>
						<input type="text" name="city" placeholder="City" class="form-control" required>
					</div>
					
					<div class="mb-3">
						<label class="form-label">State</label>
						<input type="text" name="state" placeholder="State" class="form-control" required>
					</div>
					
					<div class="mb-3">
						<label class="form-label">Zip Code</label>
						<input type="text" name="zipCode" placeholder="ZIP Code" class="form-control" required>
					</div>

					<div class="mb-3">
						<label class="form-label">Phone Number</label>
						<input type="text" name="phoneNumber" placeholder="Mobile Number" class="form-control" required>
					</div>
					
					<button type="submit" class="btn btn-danger col-md-12">Place Order</button>
				</form>
			</div>
			<div class="col-md-6">
				<p class="fs-4 text-center">Order Summary</p>
				<hr>
				
				<div class="card">
					<div class="card-body">
						<table class="table table-sm">
							<thead>
								<tr>
									<th>Product</th>
									<th>Price</th>
									<th>Qty</th>
									<th>Total</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="cart : ${carts}">
									<td th:text="${cart.product.productTitle}"></td>
									<td>Rs <span th:text="${cart.product.discountPrice}"></span></td>
									<td th:text="${cart.quantity}"></td>
									<td>Rs <span th:text="${cart.totalPrice}"></span></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>

				<div class="card mt-3">
					<div class="card-body">
						<table class="table table-borderless">
								<tbody>
									<tr>
										<td>Subtotal</td>
										<td>:</td>
										<td class="text-end">Rs [[${orderPrice}]]</td>
									</tr>
									<tr>
										<td>Delivery Charge</td>
										<td>:</td>
										<td class="text-end">Rs 250</td>
									</tr>
									<tr>
										<td>Tax</td>
										<td>:</td>
										<td class="text-end">Rs 100</td>
									</tr>
									
									<tr class="fw-bold fs-5">
										<td>Total Order Price</td>
										<td>:</td>
										<td class="text-end">Rs [[${totalOrderPrice}]]</td>
									</tr>
								</tbody>
							</table>
					</div>
				</div>

				<div class="d-grid gap-2 mt-3">
					<a href="/payment/create" class="btn btn-primary">Pay with Stripe</a>
				</div>
			</div>
			</div>
			</th:block>
		</div>
	</section>

</body>
</html>