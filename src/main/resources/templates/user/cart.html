<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base::layout(~{::section})}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<section>
		<div class="container-fluid p-5">
			
			<div class="row">
				<div class="col-md-12">
					<div class="card custom-card-shadow">
						<div class="card-header text-center fs-4">List of Products on Cart</div>

						<th:block th:if="${session.successMsg}">
							<p class="text-success fw-bold text-center mt-2">[[${session.successMsg}]]</p>
							<th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
						</th:block>
						<th:block th:if="${session.errorMsg}">
							<p class="text-danger fw-bold text-center mt-2">[[${session.errorMsg}]]</p>
							<th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
						</th:block>

						<div class="card-body">
							<th:block th:if="${carts.isEmpty()}">
								<div class="alert alert-info text-center">
									<p>Your cart is empty. <a href="/products">Continue shopping</a></p>
								</div>
							</th:block>

							<th:block th:if="${!carts.isEmpty()}">
								<table class="table">
									<thead>
										<tr>
											<th scope="col">SL No.</th>
											<th scope="col">Image</th>
											<th scope="col">Product Name</th>
											<th scope="col">Price</th>
											<th class="text-center" scope="col">Quantity</th>
											<th scope="col">Total Price</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="cart, count : ${carts}">
											<th scope="row">[[${count.count}]]</th>
											<td><img th:src="@{'/img/product_image/'+${cart.product.productImage}}" width="50px;" height="50px;"></td>
											<td>[[${cart.product.productTitle}]]</td>
											<td>[[${cart.product.discountPrice}]]</td>

											<td class="text-center"><a th:href="@{'/user/cart-quantity-update?symbol=decrease&cartId='+${cart.id}}" style="text-decoration:none;">
											<i class="fa-solid fa-minus"></i></a> [ [[${cart.quantity}]] ]
											<a th:href="@{'/user/cart-quantity-update?symbol=increase&cartId='+${cart.id}}" style="text-decoration:none;"><i class="fa-solid fa-plus"></i></a>
											</td>

											<td>[[${cart.totalPrice}]]</td>
										</tr>

										<tr>
											<td colspan="4"></td>
											<td class="fw-bold">Total Price</td>
											<td class="fw-bold">Rs [[${totalOrderPrice}]]</td>
										</tr>
									</tbody>
								</table>
								<div class="text-center">
									<a th:href="@{/user/orders}" class="btn btn-warning">Proceed Payment</a>
									<a href="/products" class="btn btn-secondary">Continue Shopping</a>
								</div>
							</th:block>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</body>
</html>