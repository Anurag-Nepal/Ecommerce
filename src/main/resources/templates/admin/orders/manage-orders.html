<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base::layout(~{::section})}">
<head>
<meta charset="UTF-8">
<title>Manage Orders | Admin</title>
</head>
<body>
	<section>
		<div class="container p-5">
			<h3 class="mb-4">Manage Orders</h3>

			<div class="card">
				<div class="card-header bg-danger text-white">
					<h5>All Orders</h5>
				</div>
				<div class="card-body">
					<div class="table-responsive">
						<table class="table table-striped table-hover" id="ordersTable">
							<thead class="table-danger">
								<tr>
									<th>#</th>
									<th>Order ID</th>
									<th>Customer Name</th>
									<th>Email</th>
									<th>Total Price</th>
									<th>Status</th>
									<th>Address</th>
									<th>City</th>
									<th>State</th>
									<th>Phone</th>
									<th>Order Date</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="order, stat : ${allOrders}">
									<td th:text="${stat.count}"></td>
									<td th:text="${order.id}"></td>
									<td th:text="${order.user.name}"></td>
									<td th:text="${order.user.email}"></td>
									<td>&#2547; <span th:text="${order.totalPrice}"></span></td>
									<td>
										<span th:if="${order.orderStatus == 'Pending'}" class="badge bg-warning text-dark">
											<i class="fas fa-hourglass-half"></i> Pending
										</span>
										<span th:if="${order.orderStatus == 'Confirmed'}" class="badge bg-info">
											<i class="fas fa-check-circle"></i> Confirmed
										</span>
										<span th:if="${order.orderStatus == 'Shipped'}" class="badge bg-primary">
											<i class="fas fa-truck"></i> Shipped
										</span>
										<span th:if="${order.orderStatus == 'Delivered'}" class="badge bg-success">
											<i class="fas fa-box-open"></i> Delivered
										</span>
										<span th:if="${order.orderStatus == 'Cancelled'}" class="badge bg-danger">
											<i class="fas fa-times-circle"></i> Cancelled
										</span>
									</td>
									<td th:text="${order.address}"></td>
									<td th:text="${order.city}"></td>
									<td th:text="${order.state}"></td>
									<td th:text="${order.phoneNumber}"></td>
									<td th:text="${#temporals.format(order.orderDate, 'dd-MMM-yyyy HH:mm')}"></td>
									<td>
										<a th:href="@{/admin/order-details/{id}(id=${order.id})}" class="btn btn-sm btn-info" title="View Details">
											<i class="fas fa-eye"></i> View
										</a>
										<a th:href="@{/admin/update-order-status/{id}(id=${order.id})}" class="btn btn-sm btn-warning" title="Update Status">
											<i class="fas fa-edit"></i> Update
										</a>
									</td>
								</tr>
								<tr th:if="${allOrders.isEmpty()}">
									<td colspan="12" class="text-center text-muted">
										<i class="fas fa-inbox fa-3x mb-3"></i><br>
										<strong>No Orders Found</strong>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</section>

	<script>
		$(document).ready(function() {
			$('#ordersTable').DataTable({
				"pageLength": 10,
				"ordering": true,
				"searching": true,
				"paging": true
			});
		});
	</script>
</body>
</html>

